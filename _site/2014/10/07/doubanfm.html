<!DOCTYPE html>
<html>
    <head>
<!-- 手机端页面 -->
<meta name="viewport" content="width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no">
<meta name="google-site-verification" content="5KH7Y5MF1c9GbPNQ94CEej-1YkeHortoXv7fjiWt7hM" />
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<title>douban.fm 终端命令行豆瓣FM</title>
<link rel="shortcut icon" href=" /img/github.ico"/>
<link rel="bookmark" href="/img/github.ico"/>
<meta name="viewport" content="width=device-width">
<meta name="description" content="Python,HTML,CSS,Machine Leaning">
<link rel="canonical" href="http://hackerxu.com/2014/10/07/doubanfm.html">
<!-- Custom CSS -->
<link rel="stylesheet" href="/css/main.css">
<link rel="stylesheet" href="/css/github.css">
<!-- 返回顶部 -->
<link href="//maxcdn.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet">
<script src="/js/jquery.js"></script>
<script src="/js/function_about.js"></script>
<!--  -->
<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-60393522-1', 'auto');
ga('send', 'pageview');

</script>
</head>

    <body>
        <header class="site-header">
    <div class="wrap">
        <a class="site-title" href="/"><h1><strong> <font style="color:#39B3D7" >L</font><font style="color:#ED9C28">i</font><font style="color:#47A447">m</font><font style="color:#D9534F">b</font><font style="color:#3276B1">o</font>
                </strong>
        </h1></a>
        <nav class="site-nav">
            <a href="#" class="menu-icon">
                <svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
                    viewBox="0 0 18 15" enable-background="new 0 0 18 15" xml:space="preserve">
                    <path fill="#505050" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0
                    h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"/>
                    <path fill="#505050" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484
                    h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"/>
                    <path fill="#505050" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0
                    c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"/>
                </svg>
            </a>
            <div class="trigger">
                
                
                <a class="page-link" href="/about/">About</a>
                
                
                
                <a class="page-link" href="/archive/">Archive</a>
                
                
                
                <a class="page-link" href="/categories/">Categories</a>
                
                
                
                <a class="page-link" href="/tags/">Tags</a>
                
                
                
                <a class="page-link" href="/atom.xml">Rss</a>
                
                
            </div>
        </nav>
    </div>
</header>

        <div class="page-content">
            <div class="wrap">
                <div class="post">
    <header class="post-header">
        <h1><a href="/2014/10/07/doubanfm.html">douban.fm 终端命令行豆瓣FM</a></h1>
        <p class="meta"><i class="fa fa-calendar"></i> 2014-10-07&nbsp&nbsp&nbsp<i class="fa fa-folder-open"></i> <a href="/categories/#python">python</a> &nbsp&nbsp&nbsp<i class="fa fa-tags"></i>&nbsp&nbsp<a href="/tags/#python">python</a></p>
    </header>
    <article class="post-content">
        <h2>douban.fm <a href="https://pypi.python.org/pypi/douban.fm"><img src="https://pypip.in/version/douban.fm/badge.svg" alt="version"></a> <a href="https://pypi.python.org/pypi/douban.fm"><img src="https://pypip.in/download/douban.fm/badge.png" alt="Downloads"></a></h2>

<p>这个版本的命令行界面是参考了 Node.js版本的<a href="https://github.com/turingou/douban.fm">douban.fm</a>制作的,向原作者致敬.终端界面设计的非常好看.</p>

<p>感谢<a href="https://github.com/cloverstd">Cloverstd</a>的修改,已经支持Mac OS X(&gt;=V0.2.9)</p>

<p>PS:如果喜欢请加Star(<em>^__^</em>)……</p>

<h3>Screenshots</h3>

<p><img src="https://raw.githubusercontent.com/taizilongxu/douban.fm/master/img/out.gif" alt="screenshot"></p>

<h3>Support</h3>

<p>Linux/Mac OS X</p>

<h3>Do something cool!</h3>

<p>其实Node.js版本已经很好了,功能齐全,但是我发现在我的zsh + tmux环境下颜色竟然显示不出来,感觉很蛋疼.</p>

<h3>Installation</h3>
<div class="highlight"><pre><code class="language-text" data-lang="text">$ sudo pip install douban.fm
</code></pre></div>
<p>需要mplayer播放器依赖,如未安装:</p>

<p>Ubuntu:</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">$ sudo apt-get install mplayer
</code></pre></div>
<p>OS X:</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">$ brew install mplayer
</code></pre></div>
<h3>Usage</h3>

<p>在终端下直接输入</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">$ douban.fm
</code></pre></div>
<h3>Login</h3>

<p>第一次登陆需要输入账号,密码,程序不会保留密码,而是保存返回的token存储在~/.douban_token.txt,下次登陆无需输入密码.</p>

<h3>Keys</h3>

<p>支持vim按键</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">移动
 [j]     --&gt; 下
 [k]     --&gt; 上
 [g]     --&gt; 移到最顶
 [G]     --&gt; 移到最底
音乐
 [space] --&gt; 播放
 [w]     --&gt; 打开歌曲主页
 [n]     --&gt; 下一首
 [r]     --&gt; 喜欢/取消喜欢
 [b]     --&gt; 不再播放
 [q]     --&gt; 退出
 [p]     --&gt; 暂停
 [l]     --&gt; 单曲循环
音量(&gt;=V0.2.9)
 [=]     --&gt; 增
 [-]     --&gt; 减
 [m]     --&gt; 静音
歌词(&gt;=v0.2.9)
 [o]     --&gt; 显示歌词(Bug很多,先别用,没有反应就是没找到歌词)
 [q]     --&gt; 退出歌词
</code></pre></div>
<h3>Configuration(&gt;=v0.2.8)</h3>

<p>.doubanfm_config保存在了~/.doubanfm_config,根据需要可以修改按键的映射</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">[key]
UP = k       # 上
DOWN = j     # 下
TOP = g      # 顶
BOTTOM = G   # 底
OPENURL = w  # 打开歌曲主页
RATE = r     # 标记喜欢/取消喜欢
NEXT = n     # 下一首
BYE = b      # 不再播放
QUIT = q     # 退出
PAUSE = p    # 暂停
LOOP = l     # 单曲循环
MUTE = m     # 静音
LRC = o      # 歌词
</code></pre></div>
<h3>Done</h3>

<ul>
<li>登陆token</li>
<li>显示PRO</li>
<li>cli设计</li>
<li>播放,下一首,红心,不再播放</li>
<li>进度条(时间)</li>
<li>终端高度的自动调整</li>
<li>pro用户歌曲kbps的选择(pro用户会自动选择192kbps)</li>
<li>歌曲结束request(发送歌曲完成)</li>
<li>config设置</li>
<li>调节音量(amixer) + 标题中显示音量</li>
<li>歌词</li>
<li>歌曲暂停</li>
<li>单曲播放</li>
</ul>

<h3>TODO</h3>

<ul>
<li>默认频道</li>
<li>播放歌曲数 红心数 不再播放数</li>
<li>异常处理</li>
</ul>

<h3>BUG</h3>

<ul>
<li><del>播放歌曲中有时候会暂停</del></li>
<li><del>退出后终端光标会隐藏</del></li>
<li><del>.douban_token.txt路径问题</del></li>
<li><del>登陆异常处理</del></li>
<li><del>静音后播放下一首会取消静音</del></li>
</ul>

<h3>Authors</h3>

<ul>
<li><a href="https://github.com/Fansion">Fansion</a></li>
<li><a href="https://github.com/cloverstd">Cloverstd</a></li>
</ul>

<h3>Reference</h3>

<ul>
<li>Node.js版本的<a href="https://github.com/turingou/douban.fm">douban.fm</a></li>
<li><a href="https://github.com/skyline75489/pyfm">豆瓣FM命令行播放器(pyfm)</a></li>
<li><a href="https://github.com/zonyitoo/doubanfm-qt/wiki/%E8%B1%86%E7%93%A3FM-API">豆瓣电台 API</a></li>
</ul>

<h3>Log</h3>

<p>V0.2.11 config兼容问题</p>

<p>V0.2.10 滚动歌词,单曲循环,暂停,静音</p>

<p>V0.2.9 支持歌词,支持Mac OS X</p>

<p>V0.2.8 增加config</p>

<h3>License (MIT)</h3>

<p>Copyright (c) 2014 hackerxu</p>

<p>Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the &quot;Software&quot;), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:</p>

<p>The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.</p>

<p>THE SOFTWARE IS PROVIDED &quot;AS IS&quot;, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.</p>

    </article>
    <!-- Duoshuo Comment BEGIN -->
    <div id="comments">
        <div class="ds-thread" data-thread-key="/2014/10/07/doubanfm"  data-title="douban.fm 终端命令行豆瓣FM - Hackerxu's Blog"></div>
    </div>
<!-- Duoshuo Comment END -->
</div>

            </div>
        </div>
        <footer class="site-footer">

    <div class="wrap">
        <div class="footer-col-1 column">
            <div class="github">
                <!-- <span class="icon github"> -->
                <svg version="1.1" class="github-icon-svg" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
                    viewBox="0 0 16 16" enable-background="new 0 0 16 16" xml:space="preserve">
                    <path fill-rule="evenodd" clip-rule="evenodd" fill="#000" d="M7.999,0.431c-4.285,0-7.76,3.474-7.76,7.761
                    c0,3.428,2.223,6.337,5.307,7.363c0.388,0.071,0.53-0.168,0.53-0.374c0-0.184-0.007-0.672-0.01-1.32
                    c-2.159,0.469-2.614-1.04-2.614-1.04c-0.353-0.896-0.862-1.135-0.862-1.135c-0.705-0.481,0.053-0.472,0.053-0.472
                    c0.779,0.055,1.189,0.8,1.189,0.8c0.692,1.186,1.816,0.843,2.258,0.645c0.071-0.502,0.271-0.843,0.493-1.037
                    C4.86,11.425,3.049,10.76,3.049,7.786c0-0.847,0.302-1.54,0.799-2.082C3.768,5.507,3.501,4.718,3.924,3.65
                    c0,0,0.652-0.209,2.134,0.796C6.677,4.273,7.34,4.187,8,4.184c0.659,0.003,1.323,0.089,1.943,0.261
                    c1.482-1.004,2.132-0.796,2.132-0.796c0.423,1.068,0.157,1.857,0.077,2.054c0.497,0.542,0.798,1.235,0.798,2.082
                    c0,2.981-1.814,3.637-3.543,3.829c0.279,0.24,0.527,0.713,0.527,1.437c0,1.037-0.01,1.874-0.01,2.129
                    c0,0.208,0.14,0.449,0.534,0.373c3.081-1.028,5.302-3.935,5.302-7.362C15.76,3.906,12.285,0.431,7.999,0.431z"/>
                </svg>
                <!-- </span> -->
            </div>
            <a href="https://github.com/taizilongxu">
                Fork me on github
            </a>
        </div>
        <div class="footer-col-2">
            <p>© 2014 - 2015 by <font style="color:#f44336">❤ </font> <a href="http://github.com/taizilongxu">Hackerxu</a></p>
        </div>
        <!-- <div class="footer-col-3 column">
      <p class="text">Python,HTML,CSS,Machine Leaning</p>
    </div> -->
    </div>
    <div class="scroll-top"><i class="fa fa-arrow-circle-up"></i></div>
</footer>


        <!-- mathjax -->
        <script type="text/x-mathjax-config">
MathJax.Hub.Config({
  tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]}
});
        </script>
        <script type="text/javascript"
                src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
        </script>
        <!-- highlight -->
        <script src="/js/highlight.pack.js"></script>
        <script>hljs.initHighlightingOnLoad();</script>
        <!-- pleace change it! -->
        <script type="text/javascript">
var duoshuoQuery = {short_name:"taizilongxu"};
(function() {
    var ds = document.createElement('script');
    ds.type = 'text/javascript';ds.async = true;
    ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
    ds.charset = 'UTF-8';
    (document.getElementsByTagName('head')[0]
     || document.getElementsByTagName('body')[0]).appendChild(ds);
})();
        </script>
        <!-- top-scrooll -->
        <script src="//cdnjs.cloudflare.com/ajax/libs/jquery.imagesloaded/3.0.4/jquery.imagesloaded.js"></script>
        <script type="text/javascript">
$(window).scroll(function() {
    if($(this).scrollTop() > 100) {
        $('.scroll-top').fadeIn(200);
    } else {
        $('.scroll-top').fadeOut(200);
    }
});
$('.scroll-top').bind('click', function(e) {
    e.preventDefault();
    $('body,html').animate({scrollTop:0},200);
});
        </script>
    </body>
</html>
