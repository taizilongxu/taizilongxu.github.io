<h1>XML</h1>

<h2>1 历史</h2>

<p>XML是从1995年开始有其雏形，并向W3C（万维网联盟）提案，而在1998年二月发布为W3C的标准（XML1.0）。XML的前身是SGML（The Standard Generalized Markup Language），是自IBM从1960年代就开始发展的GML（Generalized Markup Language）标准化后的名称。</p>

<p>GML的重要概念：</p>

<ul>
<li>文件中能够明确的将标示与内容分开</li>
<li>所有文件的标示使用方法均一致</li>
</ul>

<p>1978年，ANSI将GML加以整理规范，发布成为SGML，1986年起为ISO所采用（ISO 8879），并且被广泛地运用在各种大型的文件计划中，但是SGML是一种非常严谨的文件描述法，导致过于庞大复杂（标准手册就有500多页），难以理解和学习，进而影响其推广与应用。</p>

<p>同时W3C也发现到HTML的问题：</p>

<ul>
<li>不能解决所有解释数据的问题 - 像是影音文件或化学公式、音乐符号等其他形态的内容。</li>
<li>性能问题 - 需要下载整份文件，才能开始对文件做搜索。</li>
<li>扩充性、弹性、易读性均不佳</li>
</ul>

<p>为了解决以上问题，专家们使用SGML精简制作，并依照HTML的发展经验，产生出一套使用上规则严谨，但是简单的描述数据语言：XML。</p>

<p>XML是在一个这样的背景下诞生的——为了有一个更中立的方式，让消费端自行决定要如何消化、呈现从服务端所提供的信息。</p>

<p>XML被广泛用来作为跨平台之间交互数据的形式，主要针对数据的内容，通过不同的格式化描述手段（XSLT，CSS等）可以完成最终的形式表达（生成对应的HTML，PDF或者其他的文件格式）。</p>

<h2>2 什么是 XML?</h2>

<ul>
<li>XML 指可扩展标记语言（EXtensible Markup Language）</li>
<li>XML 是一种标记语言，很类似 HTML</li>
<li>XML 的设计宗旨是传输数据，而非显示数据</li>
<li>XML 标签没有被预定义。您需要自行定义标签。</li>
<li>XML 被设计为具有自我描述性。</li>
<li>XML 是 W3C 的推荐标准</li>
</ul>

<h2>3 XML 与 HTML 的主要差异</h2>

<ul>
<li>XML 不是 HTML 的替代。</li>
<li>XML 和 HTML 为不同的目的而设计：</li>
<li>XML 被设计为传输和存储数据，其焦点是数据的内容。</li>
<li>HTML 被设计用来显示数据，其焦点是数据的外观。</li>
<li>HTML 旨在显示信息，而 XML 旨在传输信息。</li>
</ul>

<h2>4 XML 的用途</h2>

<h4>4.1 XML 把数据从 HTML 分离</h4>

<p>如果你需要在 HTML 文档中显示动态数据，那么每当数据改变时将花费大量的时间来编辑 HTML。</p>

<p>通过 XML，数据能够存储在独立的 XML 文件中。这样你就可以专注于使用 HTML 进行布局和显示，并确保修改底层数据不再需要对 HTML 进行任何的改变。</p>

<p>通过使用几行 JavaScript，你就可以读取一个外部 XML 文件，然后更新 HTML 中的数据内容。</p>

<h4>4.2 XML 简化数据共享</h4>

<p>在真实的世界中，计算机系统和数据使用不兼容的格式来存储数据。</p>

<p>XML 数据以纯文本格式进行存储，因此提供了一种独立于软件和硬件的数据存储方法。</p>

<p>这让创建不同应用程序可以共享的数据变得更加容易。</p>

<h4>4.3 XML 简化数据传输</h4>

<p>通过 XML，可以在不兼容的系统之间轻松地交换数据。</p>

<p>对开发人员来说，其中一项最费时的挑战一直是在因特网上的不兼容系统之间交换数据。</p>

<p>由于可以通过各种不兼容的应用程序来读取数据，以 XML 交换数据降低了这种复杂性。</p>

<h4>4.4 XML 简化平台的变更</h4>

<p>升级到新的系统（硬件或软件平台），总是非常费时的。必须转换大量的数据，不兼容的数据经常会丢失。</p>

<p>XML 数据以文本格式存储。这使得 XML 在不损失数据的情况下，更容易扩展或升级到新的操作系统、新应用程序或新的浏览器。</p>

<h2>5 XML用法</h2>

<h4>5.1 一个XML文档实例</h4>

<p><img src="https://raw.githubusercontent.com/taizilongxu/taizilongxu.github.io/master/img/ct_nodetree1.gif" alt=""></p>

<p>上图表示下面的 XML 中的一本书：</p>
<div class="highlight"><pre><code class="language-xml" data-lang="xml"><span class="nt">&lt;bookstore&gt;</span>
<span class="nt">&lt;book</span> <span class="na">category=</span><span class="s">&quot;COOKING&quot;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;title</span> <span class="na">lang=</span><span class="s">&quot;en&quot;</span><span class="nt">&gt;</span>Everyday Italian<span class="nt">&lt;/title&gt;</span> 
  <span class="nt">&lt;author&gt;</span>Giada De Laurentiis<span class="nt">&lt;/author&gt;</span> 
  <span class="nt">&lt;year&gt;</span>2005<span class="nt">&lt;/year&gt;</span> 
  <span class="nt">&lt;price&gt;</span>30.00<span class="nt">&lt;/price&gt;</span> 
<span class="nt">&lt;/book&gt;</span>
<span class="nt">&lt;book</span> <span class="na">category=</span><span class="s">&quot;CHILDREN&quot;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;title</span> <span class="na">lang=</span><span class="s">&quot;en&quot;</span><span class="nt">&gt;</span>Harry Potter<span class="nt">&lt;/title&gt;</span> 
  <span class="nt">&lt;author&gt;</span>J K. Rowling<span class="nt">&lt;/author&gt;</span> 
  <span class="nt">&lt;year&gt;</span>2005<span class="nt">&lt;/year&gt;</span> 
  <span class="nt">&lt;price&gt;</span>29.99<span class="nt">&lt;/price&gt;</span> 
<span class="nt">&lt;/book&gt;</span>
<span class="nt">&lt;book</span> <span class="na">category=</span><span class="s">&quot;WEB&quot;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;title</span> <span class="na">lang=</span><span class="s">&quot;en&quot;</span><span class="nt">&gt;</span>Learning XML<span class="nt">&lt;/title&gt;</span> 
  <span class="nt">&lt;author&gt;</span>Erik T. Ray<span class="nt">&lt;/author&gt;</span> 
  <span class="nt">&lt;year&gt;</span>2003<span class="nt">&lt;/year&gt;</span> 
  <span class="nt">&lt;price&gt;</span>39.95<span class="nt">&lt;/price&gt;</span> 
<span class="nt">&lt;/book&gt;</span>
<span class="nt">&lt;/bookstore&gt;</span>
</code></pre></div>
<p>例子中的根元素是 <code>&lt;bookstore&gt;</code>。文档中的所有 <code>&lt;book&gt;</code> 元素都被包含在 <code>&lt;bookstore&gt;</code> 中。</p>

<p><code>&lt;book&gt;</code> 元素有 4 个子元素：<code>&lt;title&gt;</code>、<code>&lt; author&gt;</code>、<code>&lt;year&gt;</code>、<code>&lt;price&gt;</code>。</p>

<h4>5.2 XML 语法规则</h4>

<ol>
<li><p>所有 XML 元素都须有关闭标签</p>

<p>在 XML 中，省略关闭标签是非法的。所有元素都必须有关闭标签：</p>
<div class="highlight"><pre><code class="language-xml" data-lang="xml"><span class="nt">&lt;p&gt;</span>This is a paragraph<span class="nt">&lt;/p&gt;</span>
<span class="nt">&lt;p&gt;</span>This is another paragraph<span class="nt">&lt;/p&gt;</span> 
</code></pre></div>
<p>注意： XML 声明没有关闭标签。这不是错误。声明不属于XML本身的组成部分。它不是 XML 元素，也不需要关闭标签。</p></li>
<li><p>XML 标签对大小写敏感</p>

<p>必须使用相同的大小写来编写打开标签和关闭标签：</p>
<div class="highlight"><pre><code class="language-xml" data-lang="xml"><span class="nt">&lt;Message&gt;</span>这是错误的。<span class="nt">&lt;/message&gt;</span>
<span class="nt">&lt;message&gt;</span>这是正确的。<span class="nt">&lt;/message&gt;</span> 
</code></pre></div></li>
<li><p>XML 必须正确地嵌套</p>

<p>在 XML 中，所有元素都必须彼此正确地嵌套：</p>
<div class="highlight"><pre><code class="language-xml" data-lang="xml"><span class="nt">&lt;b&gt;&lt;i&gt;</span>This text is bold and italic<span class="nt">&lt;/i&gt;&lt;/b&gt;</span>
</code></pre></div></li>
<li><p>XML 文档必须有根元素</p>

<p>XML 文档必须有一个元素是所有其他元素的父元素。该元素称为根元素。</p>
<div class="highlight"><pre><code class="language-xml" data-lang="xml"><span class="nt">&lt;root&gt;</span>
 <span class="nt">&lt;child&gt;</span>
   <span class="nt">&lt;subchild&gt;</span>.....<span class="nt">&lt;/subchild&gt;</span>
  <span class="nt">&lt;/child&gt;</span>
<span class="nt">&lt;/root&gt;</span>
</code></pre></div></li>
<li><p>XML 的属性值须加引号</p>

<p>在 XML 中，XML 的属性值须加引号。请研究下面的两个 XML 文档。第一个是错误的，第二个是正确的：</p>
<div class="highlight"><pre><code class="language-xml" data-lang="xml"><span class="nt">&lt;note</span> <span class="na">date=</span><span class="s">08/08/2008</span><span class="nt">&gt;</span>
<span class="nt">&lt;to&gt;</span>George<span class="nt">&lt;/to&gt;</span>
<span class="nt">&lt;from&gt;</span>John<span class="nt">&lt;/from&gt;</span>
<span class="nt">&lt;/note&gt;</span> 
</code></pre></div><div class="highlight"><pre><code class="language-xml" data-lang="xml"><span class="nt">&lt;note</span> <span class="na">date=</span><span class="s">&quot;08/08/2008&quot;</span><span class="nt">&gt;</span>
<span class="nt">&lt;to&gt;</span>George<span class="nt">&lt;/to&gt;</span>
<span class="nt">&lt;from&gt;</span>John<span class="nt">&lt;/from&gt;</span>
<span class="nt">&lt;/note&gt;</span> 
</code></pre></div></li>
</ol>

<h4>5.3 属性</h4>

<p>有时候要为元素添加属性。属性由一个名称-值对构成，值包含在双引号中（&quot;），比如<code>type=&quot;dessert&quot;</code>。属性是在使用元素时存储额外信息的一种方式。在同一个文档中，可以根据需要对每个元素的不同实例采用不同的属性值。</p>

<p>您可以在元素的开始标记内部输入一个或多个属性，比如：<code>&lt;recipe type=&quot;dessert&quot;&gt;</code>。如果要添加多个属性，各个属性之间使用空格分开，比如：<code>&lt;recipename cuisine=&quot;american&quot; servings=&quot;1&quot;&gt;</code>。</p>

<p>带有元素和属性的 XML 文件：</p>
<div class="highlight"><pre><code class="language-xml" data-lang="xml"><span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="nt">&lt;recipe</span> <span class="na">type=</span><span class="s">&quot;dessert&quot;</span><span class="nt">&gt;</span>
<span class="nt">&lt;recipename</span> <span class="na">cuisine=</span><span class="s">&quot;american&quot;</span> <span class="na">servings=</span><span class="s">&quot;1&quot;</span><span class="nt">&gt;</span>Ice Cream Sundae<span class="nt">&lt;/recipename&gt;</span>
<span class="nt">&lt;preptime&gt;</span>5 minutes<span class="nt">&lt;/preptime&gt;</span>
<span class="nt">&lt;/recipe&gt;</span>
</code></pre></div>
<p>您可以根据需要使用任意数量的属性。要考虑需要添加到文档的细节。如果要对文档分类，属性尤其有用，比如按照菜谱的 type 进行分类。属性名可以包含在元素名中使用的字符，规则也是类似的，即字符之间不能带有空格，名称只能以字母开始。</p>

<h2>6 XML验证</h2>

<p>拥有正确语法的 XML 被称为“形式良好”的 XML。通过 DTD 验证的 XML 是“合法”的 XML。</p>

<h4>6.1 DTD</h4>

<p>文档类型定义（Document Type Definition）可定义合法的XML文档构建模块。它使用一系列合法的元素来定义文档的结构。DTD 可被成行地声明于 XML 文档中，也可作为一个外部引用。</p>

<p>带有 DTD 的 XML 文档实例：</p>
<div class="highlight"><pre><code class="language-xml" data-lang="xml"><span class="cp">&lt;?xml version=&quot;1.0&quot;?&gt;</span>
<span class="cp">&lt;!DOCTYPE note [</span>
<span class="cp">  &lt;!ELEMENT note (to,from,heading,body)&gt;</span>
  <span class="cp">&lt;!ELEMENT to      (#PCDATA)&gt;</span>
  <span class="cp">&lt;!ELEMENT from    (#PCDATA)&gt;</span>
  <span class="cp">&lt;!ELEMENT heading (#PCDATA)&gt;</span>
  <span class="cp">&lt;!ELEMENT body    (#PCDATA)&gt;</span>
]&gt;
<span class="nt">&lt;note&gt;</span>
  <span class="nt">&lt;to&gt;</span>George<span class="nt">&lt;/to&gt;</span>
  <span class="nt">&lt;from&gt;</span>John<span class="nt">&lt;/from&gt;</span>
  <span class="nt">&lt;heading&gt;</span>Reminder<span class="nt">&lt;/heading&gt;</span>
  <span class="nt">&lt;body&gt;</span>Don&#39;t forget the meeting!<span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/note&gt;</span>
</code></pre></div>
<p>以上 DTD 解释如下：</p>

<ul>
<li>!DOCTYPE note (第二行)定义此文档是 note 类型的文档。</li>
<li>!ELEMENT note (第三行)定义 note 元素有四个元素：&quot;to、from、heading,、body&quot;</li>
<li>!ELEMENT to (第四行)定义 to 元素为 &quot;#PCDATA&quot; 类型</li>
<li>!ELEMENT from (第五行)定义 from 元素为 &quot;#PCDATA&quot; 类型</li>
<li>!ELEMENT heading (第六行)定义 heading 元素为 &quot;#PCDATA&quot; 类型</li>
<li>!ELEMENT body (第七行)定义 body 元素为 &quot;#PCDATA&quot; 类型</li>
</ul>

<p>DTD优势：</p>

<p>每一个XML文档都可携带一个DTD，用来对该文档格式进行描述，测试该文档是否为有效的XML文档。既然DTD有外部和内部之分，当然就可以为某个独立的团体定义一个公用的外部DTD，那么多个XML文档就都可以共享使用该DTD，使得数据交换更为有效。甚至在某些文档中还可以使内部DTD和外部DTD相结合。在应用程序中也可以用某个DTD来检测接收到的数据是否符合某个标准。</p>

<p>对于XML文档而言，虽然DTD不是必须的，但它为文档的编制带来了方便。加强了文档标记内参数的一致性，使XML语法分析器能够确认文档。如果不使用DTD来对XML文档进行定义，那么XML语法分析器将无法对该文档进行确认。</p>

<h4>6.2 XML Schema</h4>

<p>W3C 支持一种基于 XML 的 DTD 代替者，它名为 XML Schema：</p>
<div class="highlight"><pre><code class="language-xml" data-lang="xml"><span class="nt">&lt;xs:element</span> <span class="na">name=</span><span class="s">&quot;note&quot;</span><span class="nt">&gt;</span>

<span class="nt">&lt;xs:complexType&gt;</span>
  <span class="nt">&lt;xs:sequence&gt;</span>
    <span class="nt">&lt;xs:element</span> <span class="na">name=</span><span class="s">&quot;to&quot;</span>      <span class="na">type=</span><span class="s">&quot;xs:string&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;xs:element</span> <span class="na">name=</span><span class="s">&quot;from&quot;</span>    <span class="na">type=</span><span class="s">&quot;xs:string&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;xs:element</span> <span class="na">name=</span><span class="s">&quot;heading&quot;</span> <span class="na">type=</span><span class="s">&quot;xs:string&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;xs:element</span> <span class="na">name=</span><span class="s">&quot;body&quot;</span>    <span class="na">type=</span><span class="s">&quot;xs:string&quot;</span><span class="nt">/&gt;</span>
  <span class="nt">&lt;/xs:sequence&gt;</span>
<span class="nt">&lt;/xs:complexType&gt;</span>

<span class="nt">&lt;/xs:element&gt;</span> 
</code></pre></div>
<p>我们认为 XML Schema 很快会在大部分网络应用程序中取代 DTD。</p>

<p>理由如下：</p>

<ul>
<li>XML Schema 可针对未来的需求进行扩展</li>
<li>XML Schema 更完善，功能更强大</li>
<li>XML Schema 基于 XML 编写</li>
<li>XML Schema 支持数据类型</li>
<li>XML Schema 支持命名空间</li>
</ul>

<h2>7 XPath</h2>

<p>XPath是W3C的一个标准。它最主要的目的是为了在XML1.0或XML1.1文档节点树中定位节点所设计。目前有XPath1.0和XPath2.0两个版本。</p>

<p>XPath是一种表达式语言，它的返回值可能是节点，节点集合，原子值，以及节点和原子值的混合等.</p>

<p>在 XPath 中，有七种类型的节点：元素、属性、文本、命名空间、处理指令、注释以及文档节点（或称为根节点）。</p>

<h4>7.1 XPath语法</h4>

<ol>
<li>选取节点：XPath 使用路径表达式在 XML 文档中选取节点。节点是通过沿着路径或者 step 来选取的。</li>
<li>谓语（Predicates）：谓语用来查找某个特定的节点或者包含某个指定的值的节点。谓语被嵌在方括号中。</li>
<li>选取未知节点：XPath 通配符可用来选取未知的 XML 元素。</li>
<li>选取若干路径：通过在路径表达式中使用“|”运算符，您可以选取若干个路径。</li>
</ol>
