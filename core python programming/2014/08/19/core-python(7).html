<!DOCTYPE html>
<html>
  <head>
    <!-- 手机端页面 -->
    <meta name="viewport" content="width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no">
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Core Python programming（7）</title>
    <link rel="shortcut icon" href=" /img/github.ico"/>
    <link rel="bookmark" href="/img/github.ico"/>
    <meta name="viewport" content="width=device-width">
    <meta name="description" content="Python,HTML,CSS,Machine Leaning">
    <link rel="canonical" href="http://hackerxu.com/core%20python%20programming/2014/08/19/core-python(7).html">
    <!-- Custom CSS -->
    <link rel="stylesheet" href="/css/main.css">
    <link rel="stylesheet" href="/css/github.css">
  <!-- 返回顶部 -->
  <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet">
  <script src="http://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.11.1.min.js"></script>

</head>

    <body>
    <header class="site-header">

  <div class="wrap">

    <a class="site-title" href="/"><h1><strong> <font style="color:#39B3D7" >L</font><font style="color:#ED9C28">i</font><font style="color:#47A447">m</font><font style="color:#D9534F">b</font><font style="color:#3276B1">o</font>
    </strong>
    </h1></a>
    <nav class="site-nav">
      <a href="#" class="menu-icon">
        <svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
           viewBox="0 0 18 15" enable-background="new 0 0 18 15" xml:space="preserve">
          <path fill="#505050" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0
            h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"/>
          <path fill="#505050" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484
            h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"/>
          <path fill="#505050" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0
            c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"/>
        </svg>
      </a>
      <div class="trigger">
        
        
          <a class="page-link" href="/about/">About</a>
        
        
        
          <a class="page-link" href="/archive/">Archive</a>
        
        
        
          <a class="page-link" href="/categories/">Categories</a>
        
        
        
        
        
        
      </div>
    </nav>
  </div>

</header>

    <div class="page-content">
      <div class="wrap">
      <div class="post">

  <header class="post-header">
    <h1>Core Python programming（7）</h1>
    <p class="meta">⌚ 2014-08-19
    &nbsp&nbsp&nbsp✉ Core Python programming &nbsp&nbsp&nbsp# python 
    </p>

  </header>

  <article class="post-content">
  <h3>第12章 模块</h3>

<h4>12.1 什么是模块</h4>

<blockquote>
<p>模块是Pyhon最高级别的程序组织单元，它将程序代码和数据封装起来以便重用。实际的角度，模块往往对应Python程序文件。每个文件都是一个模块，并且模块导入其他模块之后就可以使用导入模块定义的变量名。</p>
</blockquote>

<h4>12.2 模块和文件</h4>

<p>一个文件被看做是一个独立模块,一个模块也可以被看做是一个文件.模块的文件名就是模块的名字加上扩展名.py.在Python中,你导入的是模块或模块属性.</p>

<h5>模块名称空间</h5>

<p>每个模块都有一个自己的命名空间,这是为了防止名称冲突的发生.如果想调用模块里的函数,如下所示:</p>
<div class="highlight"><pre><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">string</span>

<span class="n">string</span><span class="o">.</span><span class="n">atoi</span><span class="p">()</span>
</code></pre></div>
<h5>搜索路径和路径搜索</h5>

<p>模块路径搜索主要在文件系统的&#39;预定义区域&#39;中查找模块,这些&#39;预定义区域&#39;不过是你的Python搜索路径的合集:</p>

<ol>
<li>程序的主目录</li>
<li>PTYHONPATH目录（如果已经进行了设置）</li>
<li>标准连接库目录（一般在/usr/local/lib/python2.X/）</li>
<li>任何的.pth文件的内容（如果存在的话）.新功能，允许用户把有效果的目录添加到模块搜索路径中去</li>
</ol>

<p>这四个组建成Python的搜索路径,查看搜索路径如下:</p>
<div class="highlight"><pre><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">sys</span>
<span class="k">print</span> <span class="n">sys</span><span class="o">.</span><span class="n">path</span>
</code></pre></div>
<p>如果想要啊增加搜索路径,那么:</p>
<div class="highlight"><pre><code class="language-python" data-lang="python"><span class="n">sys</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s">&#39;/home/limbo/test/&#39;</span><span class="p">)</span>
</code></pre></div>
<p>想要删除,那么就对列表进行删除操作就可以了.</p>

<h4>12.3 名称空间</h4>

<p>按照Python解析器加载顺序,总共有3个名称空间:</p>

<ol>
<li>内建名称空间:由<code>__builtins__</code>模块中的名字构成.</li>
<li>全局名称空间:加载的执行模块的全局名称空间</li>
<li>内建名称空间:在执行期间调用了某个函数,那么将创建这个内建名称空间,很好理解,函数局部变量的作用域就在这个空间里.</li>
</ol>

<p>解释一下,这个内建就是指在程序或者解析器运行阶段自动进行import的模块,不用手动调用,比如说我们直接调用的list,dict都不用我们import,而全局名称空间就是我们要手动import的了.</p>

<p>可以用如下方法查看内建空间的加载模块:</p>
<div class="highlight"><pre><code class="language-python" data-lang="python"><span class="nb">dir</span><span class="p">(</span><span class="n">__builtin__</span><span class="p">)</span> <span class="c">#足足100多</span>
</code></pre></div>
<p>下面这篇文章讲述了<code>__builtins__</code> 和 <code>__builtin__</code> 的区别,非常详细:
<a href="http://www.52ij.com/jishu/665.html">Python中的内建模块</a></p>

<h5>名称查找</h5>

<p>对于名称的查找是按着如下的顺序:</p>

<p>局部-&gt;全局-&gt;内建-&gt;NameError异常</p>

<p>也就是说函数里的变量名会优先在局部名称空间里查找,这也就导致了局部名称空间会<strong>覆盖</strong>同名的全局和内建名称空间变量.</p>

<h5>无限制的名称空间</h5>

<p>Python和Java不一样,那就是无限制名称空间,简单来说,就是你可以在函数外给函数添加属性(在Java里这绝对是开玩笑的),比如说:</p>
<div class="highlight"><pre><code class="language-python" data-lang="python"><span class="k">def</span> <span class="nf">foo</span><span class="p">():</span>
    <span class="k">pass</span>
<span class="n">doo</span><span class="o">.</span><span class="n">__doc__</span> <span class="o">=</span> <span class="s">&#39;haha&#39;</span>
<span class="n">foo</span><span class="o">.</span><span class="n">version</span> <span class="o">=</span> <span class="mf">0.2</span>

<span class="n">mymodule</span><span class="o">.</span><span class="n">foo</span><span class="p">()</span>
<span class="n">mymodule</span><span class="o">.</span><span class="n">version</span>
</code></pre></div>
<h4>12.4 导入模块</h4>

<p>导入模块有以下三种方法:</p>

<ol>
<li>import: 使客户端（导入者）以一个整体获取一个模块。</li>
<li>from ... import ...:容许客户端从一个模块文件中获取特定的变量名。</li>
<li>import ... as ...或form ... import ... as ...:使用自己的名字替换模块原始名称</li>
</ol>

<h5>import如何工作</h5>

<p>import执行步骤:</p>

<ol>
<li>找到模块文件</li>
<li>编译成位码（需要时）</li>
<li>执行模块的代码来创建其所定义的对象。</li>
</ol>

<p>在之后导入相同的模块时候，会跳过这三个步骤，而只提取内存中已加载模块对象。</p>

<h5>import和from import的区别</h5>

<p>许多初学者(譬如我~)分不清这两者的区别,起初只认为区别只是获取整个模块和模块中方法的区别,其实不然,这还涉及到名称空间的问题.</p>

<p>看以下列子:</p>
<div class="highlight"><pre><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">foo</span>
<span class="n">foo</span><span class="o">.</span><span class="n">method</span><span class="p">()</span>
</code></pre></div>
<p>如果用from import:</p>
<div class="highlight"><pre><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">foo</span> <span class="kn">import</span> <span class="n">method</span>
<span class="n">method</span><span class="p">()</span>
</code></pre></div>
<p>看清了吗?如果用from import会使method加入到全局名称空间,可以直接调用method方法,但是这也容易使用起来发生混淆,所以书上说不太建议这样用,要用一般在如下场合用:</p>

<ol>
<li>目标模块中的属性非常多,反复键入起来不是很方便;</li>
<li>交互解析器下,避免输入次数.</li>
</ol>

<h4>12.5 模块导入特性</h4>

<h5>载入时执行模块</h5>

<p>当一个模块被导入时,这个模块会被执行.也就是被导入模块的顶层代码将直接被执行.通常包括设定全局变量以及类和函数的声明.</p>

<p>所以当我们写程序的时候,尽量要把代码封装到函数中,只把函数和模块定义放入模块的顶层.</p>

<p>例如:</p>
<div class="highlight"><pre><code class="language-python" data-lang="python"><span class="k">def</span> <span class="nf">foo</span><span class="p">():</span>
    <span class="s">&#39;doc&#39;</span>
    <span class="k">print</span> <span class="s">&#39;test&#39;</span>

<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="k">print</span> <span class="s">&#39;test&#39;</span>

<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">main</span><span class="p">()</span>
</code></pre></div>
<p>上例中,我们要把次程序编程日后需要使用的模块,所以要把程序要执行的部分写入main()函数中,当一个模块被调用的时候会检查<code>__name__</code>,这时因为模块被载入<code>__name__</code>会被赋予模块名,所以不会执行main()函数;相反,如果直接执行此模块,则<code>__name__</code>会变成<code>__main__</code>,就是我们要执行的部分了.</p>

<p><strong>还有一点需要特别注意,千万不要把自己文件的名字改成要载入模块的名字,这会发生一个nameerror导致模块不会被加载,已经中枪好几回了.</strong></p>

<h5>关于<code>__future__</code></h5>

<p><code>__future__</code> 提供了下一个版本将要改进的新特性,但是我们不能这么使用:</p>
<div class="highlight"><pre><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">__future__</span>
</code></pre></div>
<p>必须要显示地导入指定特性.</p>

<h5>globals()和locals()</h5>

<p>分别返回调用者的全局和局部名称空间的字典.</p>
<div class="highlight"><pre><code class="language-python" data-lang="python"><span class="n">In</span> <span class="p">[</span><span class="mi">1</span><span class="p">]:</span> <span class="nb">locals</span><span class="p">()</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
<span class="n">Out</span><span class="p">[</span><span class="mi">1</span><span class="p">]:</span> 
<span class="p">[</span><span class="s">&#39;_dh&#39;</span><span class="p">,</span>
 <span class="s">&#39;__&#39;</span><span class="p">,</span>
 <span class="s">&#39;_15&#39;</span><span class="p">,</span>
 <span class="s">&#39;__builtin__&#39;</span><span class="p">,</span>
 <span class="s">&#39;_16&#39;</span><span class="p">,</span>
 <span class="s">&#39;_iii&#39;</span><span class="p">,</span>
 <span class="s">&#39;_i15&#39;</span><span class="p">,</span>
 <span class="s">&#39;quit&#39;</span><span class="p">,</span>
 <span class="s">&#39;_i9&#39;</span><span class="p">,</span>
 <span class="s">&#39;_i8&#39;</span><span class="p">,</span>
 <span class="s">&#39;_i7&#39;</span><span class="p">,</span>
 <span class="s">&#39;_i6&#39;</span><span class="p">,</span>
 <span class="s">&#39;_i5&#39;</span><span class="p">,</span>
 <span class="s">&#39;_i4&#39;</span><span class="p">,</span>
 <span class="s">&#39;_i3&#39;</span><span class="p">,</span>
 <span class="s">&#39;_i2&#39;</span><span class="p">,</span>
 <span class="s">&#39;_i1&#39;</span><span class="p">,</span>
 <span class="s">&#39;__package__&#39;</span><span class="p">,</span>
 <span class="s">&#39;_i10&#39;</span><span class="p">,</span>
 <span class="s">&#39;exit&#39;</span><span class="p">,</span>
 <span class="s">&#39;get_ipython&#39;</span><span class="p">,</span>
 <span class="s">&#39;_i&#39;</span><span class="p">,</span>
 <span class="s">&#39;_i14&#39;</span><span class="p">,</span>
 <span class="s">&#39;__doc__&#39;</span><span class="p">,</span>
 <span class="s">&#39;_i16&#39;</span><span class="p">,</span>
 <span class="s">&#39;_18&#39;</span><span class="p">,</span>
 <span class="s">&#39;_ii&#39;</span><span class="p">,</span>
 <span class="s">&#39;__builtins__&#39;</span><span class="p">,</span>
 <span class="s">&#39;_10&#39;</span><span class="p">,</span>
 <span class="s">&#39;sys&#39;</span><span class="p">,</span>
 <span class="s">&#39;__name__&#39;</span><span class="p">,</span>
 <span class="s">&#39;___&#39;</span><span class="p">,</span>
 <span class="s">&#39;_&#39;</span><span class="p">,</span>
 <span class="s">&#39;_sh&#39;</span><span class="p">,</span>
 <span class="s">&#39;In&#39;</span><span class="p">,</span>
 <span class="s">&#39;_5&#39;</span><span class="p">,</span>
 <span class="s">&#39;_i13&#39;</span><span class="p">,</span>
 <span class="s">&#39;_i12&#39;</span><span class="p">,</span>
 <span class="s">&#39;_i11&#39;</span><span class="p">,</span>
 <span class="s">&#39;_14&#39;</span><span class="p">,</span>
 <span class="s">&#39;_i17&#39;</span><span class="p">,</span>
 <span class="s">&#39;_12&#39;</span><span class="p">,</span>
 <span class="s">&#39;_11&#39;</span><span class="p">,</span>
 <span class="s">&#39;_ih&#39;</span><span class="p">,</span>
 <span class="s">&#39;_17&#39;</span><span class="p">,</span>
 <span class="s">&#39;_i19&#39;</span><span class="p">,</span>
 <span class="s">&#39;_i18&#39;</span><span class="p">,</span>
 <span class="s">&#39;_oh&#39;</span><span class="p">,</span>
 <span class="s">&#39;Out&#39;</span><span class="p">]</span>
</code></pre></div>
<h5>reload()</h5>

<p>reload()内建函数可以重新导入一个已经导入的模块.语法如下:</p>
<div class="highlight"><pre><code class="language-python" data-lang="python"><span class="nb">reload</span><span class="p">(</span><span class="n">module</span><span class="p">)</span>
</code></pre></div>
<p>注意:</p>

<ol>
<li>模块必须全部导入(不是使用form import)</li>
<li>这个模块必须在之前被import</li>
</ol>

<h4>12.7 包</h4>

<p>包是一个由层次的文件目录结构,它定义了一个由模块和子包组成的Python应用程序环境.</p>

<p>它主要解决以下问题:</p>

<ol>
<li>允许程序员把有联系的模块组合在一起</li>
<li>为平坦的名称空间加入有层次的组织结构</li>
<li>允许分发者使用目录结构而不是一大堆混乱的文件</li>
<li>帮助解决有冲突的模块名称</li>
</ol>

<h5>目录结构</h5>
<div class="highlight"><pre><code class="language-sh" data-lang="sh"><span class="c"># limbo at Pig in /usr/lib/python2.7/xml [20:11:44]</span>
<span class="nv">$ </span>tree
.
├── dom
│   ├── domreg.py
│   ├── expatbuilder.py
│   ├── __init__.py
│   ├── __init__.pyc
│   ├── xmlbuilder.py
│   └── xmlbuilder.pyc
├── etree
│   ├── cElementTree.py
│   ├── cElementTree.pyc
│   ├── __init__.py
│   └── __init__.pyc
├── __init__.py
├── __init__.pyc
├── parsers
│   ├── expat.py
│   ├── expat.pyc
│   ├── __init__.py
│   └── __init__.pyc
└── sax
    ├── handler.py
    ├── handler.pyc
    ├── __init__.py
    ├── __init__.pyc
    ├── xmlreader.py
    └── xmlreader.pyc
</code></pre></div>
<p>只看例子,我们发现每个层级下都有一个<code>__init__.py</code>文件,这些是初始化模块,from import语句导入子包时需要用到它.如果没有用到,他们可以使空文件,但必须存在.</p>

<p>因为/usr/lib/python2.7/已经在我们的sys.path中,我们可以这样调用:</p>
<div class="highlight"><pre><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">xml.dom.xmlbuilder</span>
<span class="n">xml</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span><span class="n">xmlbuilder</span><span class="o">.</span><span class="n">method</span><span class="p">()</span>
</code></pre></div>
<p>还可以这样:</p>
<div class="highlight"><pre><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">xml</span> <span class="kn">import</span> <span class="n">dom</span>
<span class="n">dom</span><span class="o">.</span><span class="n">xmlbuilder</span><span class="o">.</span><span class="n">method</span><span class="p">()</span>
</code></pre></div>
<p>也可以这样:</p>
<div class="highlight"><pre><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">xml.dom</span> <span class="kn">import</span> <span class="n">xmlbuilder</span>
<span class="n">xmlbuilder</span><span class="o">.</span><span class="n">method</span><span class="p">()</span>
</code></pre></div>
<p>最后的最后你还可以这样:</p>
<div class="highlight"><pre><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">xml.dom.xmlbuilder</span> <span class="kn">import</span> <span class="n">method</span>
<span class="n">method</span><span class="p">()</span>
</code></pre></div>
<h5>使用from-import导入包</h5>

<p>from * 语句的行为：</p>

<p>作为一个高级功能，可以在<code>__init__.py</code>文件中使用<code>__all__</code>列表来定义目录以<code>form *</code>语句形式导入时，需要导出什么。<code>__all__</code>列表是指出当包（目录—）名称使用<code>from *</code>的时候，应该导入的子模块名称清单。</p>

<p>例如xml包中的<code>__init__.py</code>文件如下:</p>
<div class="highlight"><pre><code class="language-python" data-lang="python"><span class="n">__all__</span> <span class="o">=</span> <span class="p">[</span><span class="s">&quot;dom&quot;</span><span class="p">,</span> <span class="s">&quot;parsers&quot;</span><span class="p">,</span> <span class="s">&quot;sax&quot;</span><span class="p">,</span> <span class="s">&quot;etree&quot;</span><span class="p">]</span>
<span class="n">_MINIMUM_XMLPLUS_VERSION</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>

<span class="k">try</span><span class="p">:</span>     
    <span class="kn">import</span> <span class="nn">_xmlplus</span>
<span class="k">except</span> <span class="ne">ImportError</span><span class="p">:</span>
    <span class="k">pass</span> 
<span class="k">else</span><span class="p">:</span>    
    <span class="k">try</span><span class="p">:</span> 
    <span class="err">¦</span>   <span class="n">v</span> <span class="o">=</span> <span class="n">_xmlplus</span><span class="o">.</span><span class="n">version_info</span>
    <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
    <span class="err">¦</span>   <span class="c"># _xmlplus is too old; ignore it</span>
    <span class="err">¦</span>   <span class="k">pass</span>
    <span class="k">else</span><span class="p">:</span>                                                                                                                                          
    <span class="err">¦</span>   <span class="k">if</span> <span class="n">v</span> <span class="o">&gt;=</span> <span class="n">_MINIMUM_XMLPLUS_VERSION</span><span class="p">:</span>
    <span class="err">¦</span>   <span class="err">¦</span>   <span class="kn">import</span> <span class="nn">sys</span>
    <span class="err">¦</span>   <span class="err">¦</span>   <span class="n">_xmlplus</span><span class="o">.</span><span class="n">__path__</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">__path__</span><span class="p">)</span>
    <span class="err">¦</span>   <span class="n">sys</span><span class="o">.</span><span class="n">modules</span><span class="p">[</span><span class="n">__name__</span><span class="p">]</span> <span class="o">=</span> <span class="n">_xmlplus</span>
    <span class="err">¦</span>   <span class="k">else</span><span class="p">:</span>
    <span class="err">¦</span>   <span class="err">¦</span>   <span class="k">del</span> <span class="n">v</span>  
</code></pre></div>
<p>当<code>from xml import *</code>时它会导入<code>[&quot;dom&quot;, &quot;parsers&quot;, &quot;sax&quot;, &quot;etree&quot;]</code>这几个子模块.</p>

<p><strong>绝对导入</strong>:指明顶层 package 名。比如 import a，Python 会在 sys.path 里寻找所有名为 a 的顶层模块。
<strong>相对导入</strong>:在不指明 package 名的情况下导入自己这个 package 的模块，比如一个 package 下有 a.py 和 b.py 两个文件，在 a.py 里 from . import b 即是相对导入 b.py。</p>

<p>注意:</p>

<ol>
<li>import语句总是绝对导入,只有from-import语句才可以使用相对导入</li>
<li>目前还没使用到相对导入,具体的用法还不是太清楚,平常都使用绝对导入</li>
</ol>

<h4>12.8 模块的其他特性</h4>

<h5>自动载入的模块</h5>
<div class="highlight"><pre><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">sys</span>
<span class="n">sys</span><span class="o">.</span><span class="n">modules</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
</code></pre></div>
<p>这个命令和<code>dir(__builtin__)</code>不同之处是前者是已载入模块,而后者是自动加载的模块.</p>

<h5>阻止属性导入</h5>

<p>上面提到过用<code>__all__</code>初始化&quot;from module import *&quot;导入,其实也可以在不想导入的属性名前加一个下划线(_).</p>

<h5>源代码编码</h5>
<div class="highlight"><pre><code class="language-python" data-lang="python"><span class="c">#-*- encoding: UTF-8 -*-  </span>
</code></pre></div>
<p>一般我们在python中加中文注释,就得在源代码头部加入上面的注释,告诉解析器用UTF-8进行编码(python默认使用ASCII的Unicode编码的)</p>

<h5>循环导入问题</h5>

<p>书上说的不太明白,下面这篇文章比较好理解:
<a href="http://blog.csdn.net/handsomekang/article/details/19010407">解决循环import的问题</a></p>

<p>解决办法:</p>

<ol>
<li><p>延迟导入(lazy import)
即把import语句写在方法或函数里面，将它的作用域限制在局部。
这种方法的缺点就是会有性能问题。</p></li>
<li><p>将from xxx import yyy改成import xxx;xxx.yyy来访问的形式</p></li>
<li><p>组织代码
出现循环import的问题往往意味着代码的布局有问题。
可以合并或者分离竞争资源。
合并的话就是都写到一个文件里面去。
分离的话就是把需要import的资源提取到一个第三方文件去。
总之就是将循环变成单向。</p></li>
</ol>

  </article>

<!-- Duoshuo Comment BEGIN -->
    <div id="comments">
        <div class="ds-thread" data-thread-key="/core%20python%20programming/2014/08/19/core-python(7)"  data-title="Core Python programming（7） - Good night!"></div>
    </div>
<!-- Duoshuo Comment END -->

</div>

      </div>
    </div>
    <footer class="site-footer">

<div class="wrap">
    <div class="footer-col-1 column">
      <div class="github">
            <!-- <span class="icon github"> -->
              <svg version="1.1" class="github-icon-svg" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
                 viewBox="0 0 16 16" enable-background="new 0 0 16 16" xml:space="preserve">
                <path fill-rule="evenodd" clip-rule="evenodd" fill="#000" d="M7.999,0.431c-4.285,0-7.76,3.474-7.76,7.761
                c0,3.428,2.223,6.337,5.307,7.363c0.388,0.071,0.53-0.168,0.53-0.374c0-0.184-0.007-0.672-0.01-1.32
                c-2.159,0.469-2.614-1.04-2.614-1.04c-0.353-0.896-0.862-1.135-0.862-1.135c-0.705-0.481,0.053-0.472,0.053-0.472
                c0.779,0.055,1.189,0.8,1.189,0.8c0.692,1.186,1.816,0.843,2.258,0.645c0.071-0.502,0.271-0.843,0.493-1.037
                C4.86,11.425,3.049,10.76,3.049,7.786c0-0.847,0.302-1.54,0.799-2.082C3.768,5.507,3.501,4.718,3.924,3.65
                c0,0,0.652-0.209,2.134,0.796C6.677,4.273,7.34,4.187,8,4.184c0.659,0.003,1.323,0.089,1.943,0.261
                c1.482-1.004,2.132-0.796,2.132-0.796c0.423,1.068,0.157,1.857,0.077,2.054c0.497,0.542,0.798,1.235,0.798,2.082
                c0,2.981-1.814,3.637-3.543,3.829c0.279,0.24,0.527,0.713,0.527,1.437c0,1.037-0.01,1.874-0.01,2.129
                c0,0.208,0.14,0.449,0.534,0.373c3.081-1.028,5.302-3.935,5.302-7.362C15.76,3.906,12.285,0.431,7.999,0.431z"/>
              </svg>
            <!-- </span> -->
          </div>
          <a href="https://github.com/taizilongxu">
            Fork me on github
          </a>
    </div>
      <div class="footer-col-2">
           <p align="left" style="font-size:18px;color:#A8A8A8">安,要记得你心里的梦想</p>
      </div>
    <!-- <div class="footer-col-3 column">
      <p class="text">Python,HTML,CSS,Machine Leaning</p>
    </div> -->
</div>
  <div class="scroll-top"><i class="fa fa-arrow-circle-up"></i></div>
</footer>


<!-- mathjax -->
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]}
});
</script>
<script type="text/javascript"
 src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>
<!-- highlight -->
<script src="/js/highlight.pack.js"></script>
<script>hljs.initHighlightingOnLoad();</script>
<!-- duoshuo -->
<script type="text/javascript">
var duoshuoQuery = {short_name:"taizilongxu"};
    (function() {
        var ds = document.createElement('script');
        ds.type = 'text/javascript';ds.async = true;
        ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
        ds.charset = 'UTF-8';
        (document.getElementsByTagName('head')[0]
         || document.getElementsByTagName('body')[0]).appendChild(ds);
    })();
    </script>
<!-- top-scrooll -->
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery.imagesloaded/3.0.4/jquery.imagesloaded.js"></script>
    <script type="text/javascript">

$(window).scroll(function() {

    if($(this).scrollTop() > 100) {
        $('.scroll-top').fadeIn(200);
    } else {
        $('.scroll-top').fadeOut(200);
    }
});

$('.scroll-top').bind('click', function(e) {
    e.preventDefault();
    $('body,html').animate({scrollTop:0},200);
});
</script>
    </body>
</html>
